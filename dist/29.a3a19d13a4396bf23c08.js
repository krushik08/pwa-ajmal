/*! @version pwa-studio: 0.0.1, @magento/venia-ui: ~9.7.0, @magento/upward-security-headers: ~1.0.11, @magento/pwa-theme-venia: ~1.4.0, @magento/pwa-buildpack: ~11.4.1, @magento/peregrine: ~12.6.0, @magento/pagebuilder: ~7.4.2, @magento/eslint-config: ~1.5.0, @magento/babel-preset-peregrine: ~1.2.2, @apollo/react-hooks: ^4.0.0, @apollo/client: ~3.5.0 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{Zzx0:function(e,n,t){"use strict"
t.r(n),t.d(n,"default",function(){return K}),t.d(n,"DynamicBlockShimmer",function(){return Q.a})
var i,r,o,a,l=t("RIqP"),d=t.n(l),c=t("q1tI"),s=t.n(c),u=t("17x9"),p=t("y1Xp"),g=t("pVnL"),y=t.n(g),b=t("lSNA"),v=t.n(b),m=t("J4zp"),f=t.n(m),h=t("+TN3"),_=t("Ty5D"),O=t("9872"),j=t("VkAN"),D=t.n(j),k=t("UYTu"),w={getCmsDynamicBlocksQuery:Object(k.a)(i||(i=D()(["\n    query GetCmsDynamicBlocks(\n        $cartId: String\n        $productId: ID\n        $type: DynamicBlockTypeEnum!\n        $locations: [DynamicBlockLocationEnum]\n        $uids: [ID]!\n    ) {\n        dynamicBlocks(\n            input: {\n                cart_id: $cartId\n                product_uid: $productId\n                dynamic_block_uids: $uids\n                locations: $locations\n                type: $type\n            }\n        ) {\n            items {\n                content {\n                    html\n                }\n                uid\n            }\n            salesRulesData @client\n        }\n    }\n"]))),getSalesRulesDataQuery:Object(k.a)(r||(r=D()(["\n    query SalesRulesDataQuery($cartId: String!) {\n        cart(cart_id: $cartId) {\n            id\n            # eslint-disable-next-line @graphql-eslint/require-id-when-available\n            items {\n                uid\n                # eslint-disable-next-line @graphql-eslint/require-id-when-available\n                product {\n                    uid\n                    ... on PhysicalProductInterface {\n                        weight\n                    }\n                }\n                quantity\n                # eslint-disable-next-line @graphql-eslint/require-id-when-available\n                ... on ConfigurableCartItem {\n                    # eslint-disable-next-line @graphql-eslint/require-id-when-available\n                    configured_variant {\n                        uid\n                        ... on PhysicalProductInterface {\n                            weight\n                        }\n                    }\n                }\n            }\n            prices {\n                subtotal_excluding_tax {\n                    value\n                }\n                subtotal_including_tax {\n                    value\n                }\n            }\n            selected_payment_method {\n                code\n            }\n            shipping_addresses {\n                country {\n                    code\n                }\n                postcode\n                region {\n                    code\n                    region_id\n                }\n                street\n                selected_shipping_method {\n                    method_code\n                }\n            }\n            total_quantity\n        }\n    }\n"]))),getStoreConfigData:Object(k.a)(o||(o=D()(["\n    query getStoreConfigData {\n        # eslint-disable-next-line @graphql-eslint/require-id-when-available\n        storeConfig {\n            store_code\n            product_url_suffix\n        }\n    }\n"]))),getProductDetailQuery:Object(k.a)(a||(a=D()(["\n    query getProductDetailForProductPage($urlKey: String!) {\n        products(filter: { url_key: { eq: $urlKey } }) {\n            # eslint-disable-next-line @graphql-eslint/require-id-when-available\n            items {\n                uid\n                url_key\n            }\n        }\n    }\n"])))}
function ownKeys(e,n){var t=Object.keys(e)
if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{}
n%2?ownKeys(Object(t),!0).forEach(function(n){v()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var P=function useCmsDynamicBlock(e){var n,t,i,r,o=e.locations,a=e.uids,l=e.type,d=Object(p.a)(w,e.operations),s=d.getCmsDynamicBlocksQuery,u=d.getSalesRulesDataQuery,g=d.getStoreConfigData,y=d.getProductDetailQuery,b=Object(O.b)(),v=f()(b,1)[0].cartId,m=Object(_.g)().pathname,j=Object(h.a)(g),D=j.data,k=j.loading,P=m.split("/").pop(),B=null==D?void 0:null===(n=D.storeConfig)||void 0===n?void 0:n.product_url_suffix,S=B?P.replace(B,""):P,I=Object(h.a)(y,{skip:!D,variables:{urlKey:S}}),q=I.data,E=I.loading,x=null===(i=(null!=q&&null!==(t=q.products)&&void 0!==t&&t.items&&q.products.items.length>0?q.products.items:[]).find(function(e){return e.url_key===S}))||void 0===i?void 0:i.uid,C=Object(h.a)(s,{variables:_objectSpread({cartId:v,type:l,locations:o,uids:a},x?{productId:x}:{}),skip:!v}),R=C.client,T=C.loading,$=C.error,L=C.data,A=C.refetch,K=Object(h.a)(u,{variables:{cartId:v},skip:!v}),Q=K.loading,M=function flatten(e){var n,t,i,r,o,a,l,d,c,s,u,p,g,y,b,v,m,f,h,_,O=((null==e?void 0:null===(n=e.cart)||void 0===n?void 0:n.items)||[]).reduce(function(e,n){var t=n.product,i=n.quantity,r=n.configured_variant
return e+(r?r.weight:t.weight||0)*i},0),j=(null==e?void 0:null===(t=e.cart)||void 0===t?void 0:t.shipping_addresses)||[],D=(null==e?void 0:null===(i=e.cart)||void 0===i?void 0:null===(r=i.prices)||void 0===r?void 0:null===(o=r.subtotal_excluding_tax)||void 0===o?void 0:o.value)||0,k=(null==e?void 0:null===(a=e.cart)||void 0===a?void 0:null===(l=a.prices)||void 0===l?void 0:null===(d=l.subtotal_including_tax)||void 0===d?void 0:d.value)||0,w=(null==e?void 0:null===(c=e.cart)||void 0===c?void 0:null===(s=c.selected_payment_method)||void 0===s?void 0:s.code)||null,P=(null===(u=j[0])||void 0===u?void 0:null===(p=u.country)||void 0===p?void 0:p.code)||null,B=(null===(g=j[0])||void 0===g?void 0:g.postcode)||null,S=(null===(y=j[0])||void 0===y?void 0:null===(b=y.region)||void 0===b?void 0:b.code)||null,I=(null===(v=j[0])||void 0===v?void 0:null===(m=v.region)||void 0===m?void 0:m.region_id)||null,q=(null===(f=j[0])||void 0===f?void 0:null===(h=f.selected_shipping_method)||void 0===h?void 0:h.method_code)||null,E=(null==e?void 0:null===(_=e.cart)||void 0===_?void 0:_.total_quantity)||0
return JSON.stringify([O,D,k,w,P,B,S,I,q,E])}(K.data),F=T||Q||k||E,J=null==L?void 0:null===(r=L.dynamicBlocks)||void 0===r?void 0:r.salesRulesData,N=Object(c.useCallback)(function(e,n){R.writeQuery({query:s,data:{dynamicBlocks:_objectSpread(_objectSpread({},e),{},{salesRulesData:n})},variables:_objectSpread({cartId:v,type:l,locations:o,uids:a},x?{productId:x}:{}),skip:!v})},[v,R,s,o,x,l,a])
return Object(c.useEffect)(function(){L&&J!==M&&(J?A():N(L.dynamicBlocks,M))},[J,M,L,A,N]),{loading:F,error:$,data:L}},B=t("Fk0k"),S=t("STDB"),I=function DynamicBlock(e){var n=e.content
return s.a.createElement(S.a,{html:n.html})}
I.propTypes={content:Object(u.shape)({html:u.string})}
var q=I
function cmsDynamicBlock_ee_ownKeys(e,n){var t=Object.keys(e)
if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function cmsDynamicBlock_ee_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{}
n%2?cmsDynamicBlock_ee_ownKeys(Object(t),!0).forEach(function(n){v()(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cmsDynamicBlock_ee_ownKeys(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var E=function CmsDynamicBlockGroup(e){var n=function getDynamicBlockType(e){return"fixed"===e?"SPECIFIED":"salesrule"===e?"CART_PRICE_RULE_RELATED":"catalogrule"===e?"CATALOG_PRICE_RULE_RELATED":"SPECIFIED"}(e.displayMode),t=P(cmsDynamicBlock_ee_objectSpread(cmsDynamicBlock_ee_objectSpread({},e),{},{type:n})),i=t.loading,r=t.error,o=t.data
if(!o){if(i)return null
if(r)return s.a.createElement(B.a,{message:r.message})}var a=((null==o?void 0:o.dynamicBlocks)||{}).items
return Array.isArray(a)&&a.length?a.map(function(e,n){return s.a.createElement(q,y()({key:e.uid,index:n},e))}):null}
E.defaultProps={displayMode:"fixed"},E.propTypes={displayMode:Object(u.oneOf)(["fixed","salesrule","catalogrule"]),locations:u.array,uids:Object(u.oneOfType)([u.string,u.array]).isRequired}
var x=E,C=t("LboF"),R=t.n(C),T=t("nBEM"),$={injectType:"singletonStyleTag",insert:"head",singleton:!0},L=(R()(T.a,$),T.a.locals||{}),A=function DynamicBlock(e){var n=Object(p.a)(L,e.classes),t=e.displayInline,i=e.displayMode,r=e.uids,o=void 0===r?"":r,a=e.textAlign,l=e.border,c=e.borderColor,u=e.borderWidth,g=e.borderRadius,y=e.marginTop,b=e.marginRight,v=e.marginBottom,m=e.marginLeft,f=e.minHeight,h=e.paddingTop,_=e.paddingRight,O=e.paddingBottom,j=e.paddingLeft,D=e.cssClasses,k=void 0===D?[]:D,w={textAlign:a,border:l,borderColor:c,borderWidth:u,borderRadius:g,marginTop:y,marginRight:b,marginBottom:v,marginLeft:m,minHeight:f,paddingTop:h,paddingRight:_,paddingBottom:O,paddingLeft:j},P=t?"span":"div"
return!o||o&&0===o.length?null:s.a.createElement(P,{style:w,className:[n.root].concat(d()(k)).join(" "),"aria-live":"polite","aria-busy":"false"},s.a.createElement(x,{displayMode:i,uids:o}))}
A.propTypes={classes:Object(u.shape)({root:u.string}),displayInline:u.bool,displayMode:Object(u.oneOf)(["fixed","salesrule","catalogrule"]),uids:u.string,textAlign:u.string,border:u.string,borderColor:u.string,borderWidth:u.string,borderRadius:u.string,marginTop:u.string,marginRight:u.string,marginBottom:u.string,marginLeft:u.string,paddingTop:u.string,paddingRight:u.string,paddingBottom:u.string,cssClasses:Object(u.arrayOf)(u.string)}
var K=A,Q=t("ZJgh")}}])
